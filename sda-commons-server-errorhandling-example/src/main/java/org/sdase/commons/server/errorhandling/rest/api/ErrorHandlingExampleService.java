package org.sdase.commons.server.errorhandling.rest.api;

import jakarta.validation.Valid;
import jakarta.ws.rs.Consumes;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.POST;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;
import jakarta.ws.rs.core.Response;
import org.sdase.commons.server.errorhandling.rest.model.RequestObject;
import org.sdase.commons.server.errorhandling.rest.model.ResponseObject;

@Path("errors")
public interface ErrorHandlingExampleService {

  /**
   * Example for throwing a subclass of {@link jakarta.ws.rs.WebApplicationException} These comprise
   * exceptions for nearly all used http error status codes
   *
   * @return nothing, just throws exception
   */
  @GET
  @Path("notFound")
  @Consumes(MediaType.APPLICATION_JSON)
  @Produces(MediaType.APPLICATION_JSON)
  ResponseObject notFoundException();

  /**
   * Example for creating a response object that contains an {@link
   * org.sdase.commons.shared.api.error.ApiError} as entity so that the rest guide compliant error
   * structure is returned
   *
   * @return a response object with compliant error structure
   */
  @GET
  @Path("errorResponse")
  @Consumes(MediaType.APPLICATION_JSON)
  @Produces(MediaType.APPLICATION_JSON)
  Response errorResponse();

  /**
   * Example for or creating an {@link org.sdase.commons.shared.api.error.ApiException} to throw
   * exceptions with http status codes that are not covered by {@link
   * jakarta.ws.rs.WebApplicationException}s
   *
   * @return nothing, just the exception is thrown
   */
  @GET
  @Path("apiException")
  @Consumes(MediaType.APPLICATION_JSON)
  @Produces(MediaType.APPLICATION_JSON)
  Response apiException();

  /**
   * Example for validation exceptions generated by build-in and custom validations
   *
   * @param resource should contain invalid data to force the exception
   * @return ok, if valid. {@link jakarta.validation.ValidationException} if the input param is
   *     empty or not uppercase
   */
  @POST
  @Path("validation")
  @Consumes(MediaType.APPLICATION_JSON)
  @Produces(MediaType.APPLICATION_JSON)
  Response validation(@Valid RequestObject resource);
}
