
buildscript {
    repositories {
        jcenter()
        maven {
            url 'https://nexus.intern.sda-se.online/repository/sda-se-public/'
            credentials {
                username sdaNexusUser
                password sdaNexusPassword
            }
        }
    }
    dependencies {
        classpath 'com.commercehub.gradle.plugin:gradle-avro-plugin:0.10.0'
    }
}

apply plugin: 'com.commercehub.gradle.plugin.avro'

dependencies {
    compile project(':sda-commons-server-dropwizard')

    compile ('org.apache.kafka:kafka-clients:'+kafkaClientsVersion) {
        exclude group: 'org.slf4j', module: 'slf4j-log4j12'
        exclude group: 'org.slf4j', module: 'slf4j-api'
    }

    compile ('com.github.ftrossbach:club-topicana-core:'+kafkaTopicanaCoreVersion) {
        exclude group: 'org.slf4j', module: 'slf4j-log4j12'
        exclude group: 'org.slf4j', module: 'slf4j-api'
        exclude group: 'org.apache.zookeeper', module: 'zookeeper'
        exclude group: 'org.apache.kafka', module: 'kafka_2.12'
        exclude group: 'org.apache.kafka', module: 'kafka_2.11'
        exclude group: 'org.apache.kafka', module: 'kafka-clients'
        exclude group: 'com.fasterxml.jackson.core', module: 'jackson-databind'
        exclude group: 'org.yaml', module: 'snakeyaml'
    }

    compile 'io.prometheus:simpleclient:' + prometheusClientVersion

    testCompile group: 'org.hamcrest', name: 'hamcrest-all', version: '1.3'
    testCompile group: 'org.mockito', name: 'mockito-all', version: '1.10.19'
    
    
    testCompile group: 'io.confluent', name: 'kafka-avro-serializer', version: confluentVersion,  {
        exclude group: 'org.slf4j', module: 'slf4j-log4j12'
        exclude group: 'org.slf4j', module: 'slf4j-api'
        exclude group: 'org.apache.kafka', module: 'kafka-clients'
        exclude group: 'org.apache.zookeeper', module: 'zookeeper'
        exclude group: 'org.xerial.snappy', module: 'snappy-java'
        exclude group: 'com.fasterxml.jackson.core', module: 'jackson-databind'
    }
    testCompile 'com.fasterxml.jackson.core:jackson-databind:' + jacksonVersion

    // for AVRO Plugin 
    testCompile ('org.apache.avro:avro:1.8.1') {
        exclude group: 'org.slf4j', module: 'slf4j-log4j12'
        exclude group: 'org.slf4j', module: 'slf4j-api'
        exclude group: 'org.xerial.snappy', module: 'snappy-java'
    }

    testCompile project(':sda-commons-server-kafka-testing')
    testCompile project(':sda-commons-server-kafka-confluent-testing')


}

