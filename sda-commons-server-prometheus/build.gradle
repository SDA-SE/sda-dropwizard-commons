dependencies {

  api project(':sda-commons-server-dropwizard')
  api project(':sda-commons-shared-tracing')
  api 'io.dropwizard:dropwizard-client'
  api 'jakarta.servlet:jakarta.servlet-api'

  api 'io.prometheus:prometheus-metrics-core'
  api 'io.prometheus:prometheus-metrics-instrumentation-dropwizard'
  api 'io.prometheus:prometheus-metrics-exporter-servlet-jakarta'

  implementation('io.micrometer:micrometer-core')
  implementation('io.micrometer:micrometer-registry-prometheus')
  implementation('org.glassfish.jersey.ext:jersey-micrometer')

  testImplementation project(':sda-commons-server-testing')
  testImplementation project(':sda-commons-client-jersey')

  test {
    // running one test at time, to avoid problems with concurrency
    maxParallelForks = (int) (Runtime.runtime.availableProcessors() / 2 + 1)
  }
}
