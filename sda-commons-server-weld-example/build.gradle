// we need the 'beans.xml' in the classes directory
task copyMainMetaInf(type: Copy) {
  from "${projectDir}/src/main/resources/META-INF"
  into "${buildDir}/classes/java/main/META-INF"
}

processResources.dependsOn copyMainMetaInf

jar {
  duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}

dependencies {
  api project(':sda-commons-server-dropwizard')
  api project(':sda-commons-server-weld')

  testImplementation 'org.jboss.weld:weld-junit5:4.0.1.Final', {
    // Dropwizard is using org.glassfish:jakarta.el:4.0.2
    exclude group: 'jakarta.el', module: 'jakarta.el-api'
    exclude group: 'org.junit', module: 'junit-bom'
  }
  testImplementation 'org.assertj:assertj-core'
}

